<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Probius">





<title>bit_operation | 探姬的博客</title>




    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <script src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script>
    <script id="music" src="https://music.xingyaox.com/player.js" key="probius"></script>
    
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">探姬的Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">探姬的Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">bit_operation</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Probius</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">November 20, 2021&nbsp;&nbsp;1:51:38</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h1><h2 id="amp-（and-和-运算-二元）"><a href="#amp-（and-和-运算-二元）" class="headerlink" title="&amp;（and,和 运算,二元）"></a>&amp;（and,和 运算,二元）</h2><p>and运算通常用于二进制的取位操作，例如一个数 and 1的结果就是取二进制的最末位。这可以用来判断一个整数的奇偶，二进制的最末位为0表示该数为偶数，最末位为1表示该数为奇数（Eg：快速奇偶判断）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    n&amp;<span class="number">1</span>?<span class="built_in">printf</span>(<span class="string">&quot;odd&quot;</span>):<span class="built_in">printf</span>(<span class="string">&quot;even&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其原理为“相同位的两个数字都为1，则为1(True)；若有一个不为1，则为0(False)”<br>举个栗子：<br><strong>20：10100        20:10100</strong><br><strong>01：00001        04:00100</strong><br><strong>————        ———–</strong><br><strong>re：00000         re:00100</strong><br><strong>10=  0               10= 4</strong></p>
<h2 id="（or-或-运算，二元）"><a href="#（or-或-运算，二元）" class="headerlink" title="|（or,或 运算，二元）"></a>|（or,或 运算，二元）</h2><p>（相同位只要一个为1即为1）<br>or运算通常用于二进制特定位上的无条件赋值，例如一个数or 1的结果就是把二进制最末位强行变成1。<br>在这里你会发现一个有意思的东西：在某些情况(其实就是<strong>不进位</strong>的情况下)下a+b 和 a|b是等价的<br><strong>153:10011001</strong><br><strong>102:01100110</strong><br><strong>|   =255</strong><br>如果需要把二进制最末位变成0，对这个数or 1之后再减一就可以了，其实际意义就是把这个数强行变成最接近的偶数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">103</span>;</span><br><span class="line"><span class="keyword">var</span> c = (a | <span class="number">1</span>) - <span class="number">1</span>;<span class="comment">//注意优先级</span></span><br><span class="line"><span class="built_in">console</span>.log(c);</span><br></pre></td></tr></table></figure>
<p><strong>控制台输出：102</strong><br><strong>103：1100111</strong><br><strong>| 1  :  1100111</strong><br><strong>-1   :   1100110</strong></p>
<h2 id="xor，异或-运算-（二元）"><a href="#xor，异或-运算-（二元）" class="headerlink" title="xor，异或 运算 ^（二元）"></a>xor，异或 运算 ^（二元）</h2><p>按位异或运算, 对等长二进制模式按位或二进制数的每一位执行逻辑按位异或操作，操作的结果是如果某位不同则该位为1, 否则该位为0.（相同位不同则为1，相同则为0）<br><strong>00101</strong><br><strong>11100</strong><br><strong>——-</strong><br><strong>11001</strong></p>
<blockquote>
<p>xor运算的逆运算是它本身，也就是说两次异或同一个数最后结果不变，即(a xor b) xor b = a。xor运算可以用于简单的加密，比如我想对我MM说1314520，但怕别人知道，于是双方约定拿我的生日19880516作为密钥。1314520 xor 19880516 = 20665500，我就把20665500告诉MM。MM再次计算20665500 xor 19880516的值，得到1314520。</p>
</blockquote>
<p><strong>在不进位的情况下，xor,or的运行结果相同~</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a = <span class="number">2</span>;</span><br><span class="line">var b = <span class="number">153</span> ^ <span class="number">102</span>;</span><br><span class="line">console.<span class="built_in">log</span>(b);</span><br><span class="line"><span class="comment">//输出225</span></span><br></pre></td></tr></table></figure>
<h2 id="not，非-运算-（一元）"><a href="#not，非-运算-（一元）" class="headerlink" title="not，非 运算 ~（一元）"></a>not，非 运算 ~（一元）</h2><p>not运算的定义是把内存中的0和1全部取反。<br>使用not运算时要格外小心，你需要注意整数类型有没有符号。如果not的对象是无符号整数（不能表示负数），那么得到的值就是它与该类型上界的差，因为无符号类型的数是用00到$FFFF依次表示的。<br>下面程序返回65535-100=65435:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span> a=<span class="number">100</span>;</span><br><span class="line">    a=~a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>~的使用技巧：</strong><br>记得 <strong>!=EOF</strong>吗，关于代码”<code>if(scanf(&quot;%d&quot;,n)!=EOF)</code>“,它可以写成”<code>if(~scanf(&quot;%d&quot;,n))</code>“<br>因为scanf如果没有输入值就是返回**_-1_**，对于-1取反，则为0,<strong>0 ==  false</strong><br>这里注意，布尔类型和数字类型的非运算符号不一样，布尔类型是!，数字类型是~。</p>
<h2 id="shr，右移-运算-gt-gt-（二元）"><a href="#shr，右移-运算-gt-gt-（二元）" class="headerlink" title="shr，右移 运算 &gt;&gt;（二元）"></a>shr，右移 运算 &gt;&gt;（二元）</h2><p>a shr b表示二进制右移b位（去掉末b位）<br>举个栗子：<br>运行这段代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">985</span>;</span><br><span class="line">b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br></pre></td></tr></table></figure>
<p><strong>控制台会输出：492，原理如下</strong><br><strong>985：1111011001</strong><br><strong>&gt;&gt;1</strong><br><strong>492： 0111101100</strong><br><strong>可以看到，985的二进制想右位移1位，高位用0补齐了；</strong><br>_ <strong>&amp;与&gt;&gt;的运用</strong>_<br>可用来取<strong>整数n</strong>的<strong>二进制数</strong>的第<strong>k</strong>位数<br><strong><em>n&gt;&gt;k&amp;1</em></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">211</span>;</span><br><span class="line"><span class="keyword">var</span> w = n &gt;&gt; <span class="number">4</span> &amp; <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(w);</span><br></pre></td></tr></table></figure>
<p><strong>控制台会输出：1，即是211二进制表示的第4位数</strong><br><strong>原理解析：</strong><br><strong>211： 11010011</strong><br><strong>&gt;&gt;4    00001101</strong><br><strong>&amp;1      00000001</strong><br><strong>re10 ：1</strong></p>
<h2 id="shl，左移-运算-lt-lt-（二元）"><a href="#shl，左移-运算-lt-lt-（二元）" class="headerlink" title="shl，左移 运算 &lt;&lt;（二元）"></a>shl，左移 运算 &lt;&lt;（二元）</h2><p>同理，我们的&lt;&lt;运算符则是向左移动，通常可以用来快速进行2的幂运算<br>这里直接用2的幂运算举例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>&lt;&lt;<span class="number">4</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>
<p><strong>控制台会输出：32，也就是2的4+1次幂，为什么是4+1？</strong><br><strong>原理同&gt;&gt;,下面具体化一下：</strong><br><strong>02：_0000_10</strong><br><strong>&lt;&lt;4</strong><br><strong>32：100000</strong></p>
<h2 id="无符号右移（二元）"><a href="#无符号右移（二元）" class="headerlink" title="无符号右移（二元）"></a>无符号右移（二元）</h2><p><strong>无符号右移在C中并不存在，在C中对无符号数进行右移便是无符号右移！</strong><br><strong>（在其他支持语言中大多为&gt;&gt;&gt;）</strong><br>无符号右移是将二进制数所有位向右移动指定位数，与右移不同，无符号右移空位永远补0。<br>例如：<code>0b10011 &gt;&gt;&gt; 2 = 0b00100[11]</code>（括号中的数是被裁掉的数）。<br>​</p>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1><p><strong>​</strong></p>
<h1 id="-1"><a href="#-1" class="headerlink" title=""></a></h1>
        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Probius</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://example.com/2021/11/20/bit-operation/">http://example.com/2021/11/20/bit-operation/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2021 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/algorithm/"># algorithm</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2021/11/20/%E6%B5%85%E8%B0%88%E6%B5%AE%E7%82%B9/">浅谈浮点</a>
            
            
            <a class="next" rel="next" href="/2021/11/20/PHP%E3%81%AE%E5%B0%8F%E7%AC%94%E8%AE%B0/">PHPの小笔记</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Probius | Powered by <a href="https://hexo.io" target="_blank">Hexo  </a> <a href="  https://beian.miit.gov.cn/" target="_blank">蜀ICP备2021017506号</a></span>
    </div>
</footer>

    </div>
</body>

</html>